(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{4272:(e,r,s)=>{Promise.resolve().then(s.bind(s,9180))},9180:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>p});var a=s(5594),l=s(376),t=s(5155),i=s(2115),n=s(6874),d=s.n(n),c=s(7930),o=s(4516),m=s(5742),x=s(6932),u=s(7924),h=s(8564),b=s(4186);let g=(0,s(5028).default)(()=>Promise.all([s.e(484),s.e(761),s.e(6)]).then(s.bind(s,5006)),{loadableGenerated:{webpack:()=>[5006]},ssr:!1});function p(){let[e,r]=(0,i.useState)([]),[s,n]=(0,i.useState)(null),[p,v]=(0,i.useState)(!1),[f,j]=(0,i.useState)(null),[y,N]=(0,i.useState)(""),[w,P]=(0,i.useState)(""),[T,k]=(0,i.useState)("available"),[C,A]=(0,i.useState)(""),[S,B]=(0,i.useState)({riderName:"",riderPhone:"",notes:"",scheduledTime:""});(0,i.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{j({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Error getting location:",e),j({lat:50.8503,lng:4.3517})}):j({lat:50.8503,lng:4.3517}),r([{id:"1",driverId:"driver1",driverName:"Jean Dupont",vehicleId:"vehicle1",licensePlate:"1-ABC-123",vehicleBrand:"Mercedes",vehicleModel:"E-Class",currentLocation:{lat:50.8505,lng:4.352,address:"Grand Place, Brussels"},status:"available",rating:4.8,totalTrips:1250,estimatedArrival:3,currentTariff:{id:"tariff1",name:"Standard",code:"A",type:"meter_based",startPrice:4.2,pricePerKm:1.8,pricePerMinute:.5,nightSurcharge:2}},{id:"2",driverId:"driver2",driverName:"Marie Lambert",vehicleId:"vehicle2",licensePlate:"1-DEF-456",vehicleBrand:"Volkswagen",vehicleModel:"Passat",currentLocation:{lat:50.8456,lng:4.3572,address:"European Quarter, Brussels"},status:"available",rating:4.6,totalTrips:890,estimatedArrival:7,currentTariff:{id:"tariff2",name:"Comfort",code:"B",type:"meter_based",startPrice:5.5,pricePerKm:2.2,pricePerMinute:.6,nightSurcharge:2.5}},{id:"3",driverId:"driver3",driverName:"Ahmed Hassan",vehicleId:"vehicle3",licensePlate:"1-GHI-789",vehicleBrand:"BMW",vehicleModel:"3 Series",currentLocation:{lat:50.8476,lng:4.3619,address:"Schuman Roundabout, Brussels"},status:"busy",rating:4.9,totalTrips:2100,estimatedArrival:0,currentTariff:{id:"tariff3",name:"Premium",code:"C",type:"meter_based",startPrice:7,pricePerKm:2.8,pricePerMinute:.8,nightSurcharge:3}}])},[]);let _=e.filter(e=>("available"!==T||"available"===e.status)&&("nearby"!==T||!(e.estimatedArrival>10))&&(!C||!!e.driverName.toLowerCase().includes(C.toLowerCase())||!!e.licensePlate.toLowerCase().includes(C.toLowerCase()))),L=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,{startPrice:s,pricePerKm:a}=e.currentTariff;return s+r*a},M=e=>{n(e),v(!0)};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(d(),{href:"/",className:"flex items-center",children:[(0,t.jsx)(c.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"TaxiPlatform"})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(d(),{href:"/drivers",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Drivers"}),(0,t.jsx)(d(),{href:"/",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Home"})]})]})})}),(0,t.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Find a Ride"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Book a taxi near you with real-time tracking and transparent pricing"})]})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Trip"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 inline mr-1"}),"Pickup Location"]}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Enter pickup address or use current location",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"Destination (Optional)"]}),(0,t.jsx)("input",{type:"text",value:w,onChange:e=>P(e.target.value),placeholder:"Enter destination address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 inline mr-1"}),"Availability"]}),(0,t.jsxs)("select",{value:T,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"All Taxis"}),(0,t.jsx)("option",{value:"available",children:"Available Only"}),(0,t.jsx)("option",{value:"nearby",children:"Nearby (≤10 min)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 inline mr-1"}),"Search"]}),(0,t.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),placeholder:"Search by driver name or plate",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Available Taxis (",_.length,")"]}),(0,t.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:_.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border transition-all cursor-pointer ".concat((null==s?void 0:s.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>n(e),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.driverName}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.vehicleBrand," ",e.vehicleModel," • ",e.licensePlate]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-yellow-400 mr-1"}),e.rating," (",e.totalTrips,")"]})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"available"===e.status?"".concat(e.estimatedArrival," min away"):"Currently busy"]}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("available"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg mb-3",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:["Tariff ",e.currentTariff.code,": ",e.currentTariff.name]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,t.jsxs)("p",{children:["Start: €",e.currentTariff.startPrice.toFixed(2)]}),(0,t.jsxs)("p",{children:["Per km: €",e.currentTariff.pricePerKm.toFixed(2)," | Per min: €",e.currentTariff.pricePerMinute.toFixed(2)]}),(0,t.jsxs)("p",{className:"font-medium",children:["Est. price (5km): €",L(e,5).toFixed(2)]})]})]}),"available"===e.status&&(0,t.jsx)("button",{onClick:r=>{r.stopPropagation(),M(e)},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Book This Taxi"})]},e.id))})]})})]}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 h-full min-h-[600px]",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Live Taxi Map"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"See all available taxis in real-time"})]}),(0,t.jsx)("div",{className:"h-full p-4",children:f&&(0,t.jsx)(g,{center:f,taxis:_,selectedTaxi:s,onTaxiSelect:n})})]})})]})}),p&&s&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Book Your Ride"}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:s.driverName}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[s.vehicleBrand," ",s.vehicleModel," • ",s.licensePlate]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-yellow-400 mr-1"}),(0,t.jsxs)("span",{className:"text-sm",children:[s.rating," rating"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["• ",s.estimatedArrival," min away"]})]})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&(console.log("Booking submitted:",{pickupLocation:f?{lat:f.lat,lng:f.lng,address:y||"Current Location"}:s.currentLocation,destination:w?{lat:0,lng:0,address:w}:void 0,selectedTaxiId:s.id,tariffType:s.currentTariff.code,estimatedPrice:L(s),riderInfo:{name:S.riderName,phone:S.riderPhone,notes:S.notes}}),alert("Booking request sent! The driver will contact you shortly."),v(!1),n(null),B({riderName:"",riderPhone:"",notes:"",scheduledTime:""}))},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),(0,t.jsx)("input",{type:"text",required:!0,value:S.riderName,onChange:e=>B((0,l._)((0,a._)({},S),{riderName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",required:!0,value:S.riderPhone,onChange:e=>B((0,l._)((0,a._)({},S),{riderPhone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),(0,t.jsx)("textarea",{value:S.notes,onChange:e=>B((0,l._)((0,a._)({},S),{notes:e.target.value})),placeholder:"Any special instructions...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Trip Summary"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("p",{children:["Pickup: ",y||"Current Location"]}),w&&(0,t.jsxs)("p",{children:["Destination: ",w]}),(0,t.jsxs)("p",{children:["Tariff: ",s.currentTariff.name," (",s.currentTariff.code,")"]}),(0,t.jsxs)("p",{className:"font-medium",children:["Estimated Price: €",L(s,5).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>v(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Confirm Booking"})]})]})]})})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[874,81,441,684,358],()=>r(4272)),_N_E=e.O()}]);